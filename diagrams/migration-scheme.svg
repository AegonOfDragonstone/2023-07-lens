<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than draw.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1121px" height="800px" viewBox="-0.5 -0.5 1121 800" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2023-07-14T13:52:10.264Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36&quot; etag=&quot;Z2zjNbR8kGnbyQzj5vHM&quot; version=&quot;21.6.1&quot; type=&quot;google&quot;&gt;&lt;diagram name=&quot;Page-1&quot; id=&quot;97D-lkHAe0sghriAH9QC&quot;&gt;7VtLc9s2EP4tPWjqHOyhSJGyjo7s1J1Jm0ziJm0vHoiESNQUwYKgZeXXd7EA35SiJKI9lptMbHIJLIH99ollRs589fCLIGn0Gw9oPLKt4GHkXI5sezx1ZvBLUTaaMnMnmhAKFphBFeEj+0IN0TLUnAU0awyUnMeSpU2iz5OE+rJBI0LwdXPYksfNt6YkpB3CR5/EXepnFsjIUMferHpwTVkYmVef21P9YEWKwWYnWUQCvq6RnKuRMxecS321epjTWAmvkIue92bL03JhgiZynwl/h8H83d//htfhX5fjORebzW10ahabyU2xYRrA/s0tFzLiIU9IfFVRXwueJwFVXC24q8a85TwF4hiI/1ApNwZMkksOpEiuYvNUv1O9aOtWDCnjufDpjvUXKkFESOWOcU4pcNBUyldUig3MEzQmkt0310GMyoTlODP1QgiyqQ1IOUtkVuP8XhFggNH+mUHeqP7YbQAEF5phcVdbWUVCEL8B0MJujh7RyVMgeu42EJ1M3UdAdPxCEHWfBNGmjXqzx7BR/cp7EudmV29pkn2yf2OhgK3ypAM4xI5UXfqbmAGuwgGE1hGT9GNKUPZriL5NABdaA94uSgLx70LUi3e5BDbU0DOtAmO3RP2eCkkfduPexclMcJoCnZjbdT14GlpUj5vWdmBraHy7sO2OsEe2F0slLNiIF6orJX4Y82l8ChSyUpJE+ic1s4aK9dGP6IoWDGA9FY+CmBaEz1RtkdyrXwT+dTBWOYsUxFfaKCOifrFMy1pd86WZdJ0v1OLUWk5IEmAGBD8WFI1jxe+pogW5YEmIrNSDhD4oJnkKrwtwCUtJRfl4VVsGvjTLfZ9m2TKPX53V9pdu3d5r6pM8o8VCs1hhGStFCNhySVFdcIs+TZUBWiRNY4ZLZUmxn3VNRrgpvS51+17wJYsh9bMBd+sNj2OVywEblIC+h3QzxyF6DcWU/TZwkWx4ot7kEwSDoC7VBbPME19dZijtYrsgQHQwAuWohYs7SnhyCvtdxgxmIRR6rYouqDIqTV2jgzoxfP7JMyWo7I6lihHKUql+VAzGTceCkmBTCSgouUuhhdoSn1wzn77qF0TLuUilKg3fkUnB7+icx1wAJaBLkiMbkG5cUBMlPBgKDkit1Ll0q7sbDDKntrXFTYHKimWMyXDEgoAmnYh1AEfkeU1PZHc90WTW44nG06FckdNxRQsi/Ui7BFpo70kOAcp2vZH7euReGs0MiFQ+JNVjfg2yV9tg7JM36h6wuQAjBVlfrkDomCbUAR3ZztJVfxUdPFONrv90FAOeePjnMICVgi/y5Z7YYfchZg8F2Pj8madekz1Tr7H3g7nXD4l5stMujOs/Af8FCjdG7zC3RxcAurXjYocVLZEjFe9La8Igcyj2LMjeLQ1vvXjloA/4Ar3+G7DEBNe+g+8LcBOTPjcx6XETg/l1dw/9NanK/869KLTOu6g554/q3LuVwQeaxiDbrEyTYxoSX+3iDW3giOuGZas8e933eF7mZyxhkpEYnL1iy2Q1NSOqlFAyhAtIzrNvzsxMDtaTlhGjDDFdyl060qdQB8/EbKuJ/bTHYnuxdwbDvhty5jElokK+4b9L0DE9bwxQKyZBgexJVSYw+XOGyb9SI56EWHzBo0YBNNebK3gKCvgy35QfmNFrX49TTU1ReYqRqd1osuSQB2CtgeE63mz1IEenSz1+ZNJ3wDCcLnXdP8ChYCF+1AQraXh5EwOci4N4+wF89NTa004nQ8nW9p4iAQdxic2f9Zu/FLMzt7i9fDDM9d2mod6HOTP19szc7Sc5B/fspqa4j3IQ7nUMTbvn39/cdNTkGZ2Yul6rq+DueWbqDmZ2VkfSwNbks99biPXUXd9eFZEggCCZdZm9Wycqwn5vlaUEcsCirVWjvbQSzWt1VSZOV6N7S7TZYBrd7bn8kWFKto54kUfVzlZX+lQ2Up8LtDI+9DaNY2hNweiuR5rMnvg+OA95rKlYG2W374TV7UF5sFTM7pZ0dYSyiOeIZ8IRXN13GHkWFyxkkCHowTdsBXm4agOpE2Qro5jZg2ULKAP8VgfjFEFH9cEfESbr2NcIWKZO/HOWqTRwQeWaUpw3HummQE3flq3+BvI2xKPN5TsK5D25AnWP6LGNp3Wg6KytC4CwdK9AW+Si8gF1xTupekeVpiSoKXpw0WJRKOv+zWmJv+kDMUhjc1lSjRdSjK4+zKf2+MVoiddTlTyylnRPD6o+LV0x3e4sdeDk7OzslXpyr3ui+hChyqfMY+zA0qDW2hNUgkbpuh7cxRcqePlWpQcCY1YiK4d1pCowbjuKngzZ7itMh8uQp/2Owo+ofzdqHBSltYOiZi93oeNBLQwsNgUPbfW3t5dX7z9czS9uri5vbyNQC2T0E74R9ub9m3PT3C6vrBPtm8r+uRXwdsy7Rk6mt25OqlYkIWEV3Qi6PeXh0B+hghezrPIzCf0TKJjp6gEfaAiRD/ErvnA4WufU1szyCOVrRybDaeaso5nKJY3K/NW4naDlll4GPk5fbT3twWewtkMRldrBo7Ct53uO0fngoqfqG1t9tuAOJetu1dfrp56xzCctmc96ZN5XaXuD6fekI8/n9c2EY4rIr39TbvVD8zgfTRTLbGcgK31Qq8K3rlSui6xBlwym+dg4qCgTC03FAjVt9bfq/acspT4j1edyVL+jiCjFd3NFKrHLvx1pnLEn9pnbzQT6LHGwMsV5kubJIS3R3dcSt4DzSJbYbQB+1t1cFV9qH92WLWOTPJtPM+tfHJfGCiHj7itWBxb2FkZts7p9It2RWp9jdW2vtz4czva69WGfqzxOONx2UrJvIjgcHOdb4Gja0JHCYe2RIz4uHN0atX5cqk+2lMsLwXkndc95pAi1+2U9R5wHOkSA2+q/nOrOfPUfd52r/wA=&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 59.97 110 L 59.97 140 L 133.63 140" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 138.88 140 L 131.88 143.5 L 133.63 140 L 131.88 136.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 55 110 L 55 464.97 L 133.63 464.97" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 138.88 464.97 L 131.88 468.47 L 133.63 464.97 L 131.88 461.47 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 49.97 110 L 49.97 680 L 133.63 680" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 138.88 680 L 131.88 683.5 L 133.63 680 L 131.88 676.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 45 C 0 36.72 24.62 30 55 30 C 69.59 30 83.58 31.58 93.89 34.39 C 104.21 37.21 110 41.02 110 45 L 110 95 C 110 103.28 85.38 110 55 110 C 24.62 110 0 103.28 0 95 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 110 45 C 110 53.28 85.38 60 55 60 C 24.62 60 0 53.28 0 45" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 83px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">LensV2Migration</div></div></div></foreignObject><text x="55" y="86" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">LensV2Migration</text></switch></g><rect x="630" y="10" width="490" height="170" fill="none" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 482px; height: 1px; padding-top: 0px; margin-left: 635px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 180px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><h1>Lens V1-&gt;V2 Migration Scheme</h1><p>We have a LensV2Migration contract that is part of LensHub V2 (and to be removed during the next upgrade after the migration is successful).</p><p>Because of slightly different concepts applied in V2 we have to migrate Profiles, Follows and FollowModules of Profiles.</p><p>Anyone can call migration functions because they are made in non-conflicting and non-reverting way (they just skip if something was already migrated and tried to migrate twice)</p></div></div></div></foreignObject><text x="635" y="12" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">Lens V1-&gt;V2 Migration Scheme...</text></switch></g><rect x="140" y="130" width="290" height="20" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 288px; height: 1px; padding-top: 140px; margin-left: 142px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">batchMigrateProfiles(uint256[] calldata profileIds)</div></div></div></foreignObject><text x="142" y="144" fill="#333333" font-family="Helvetica" font-size="12px">batchMigrateProfiles(uint256[] calldata profileI...</text></switch></g><path d="M 380 465 L 528.63 465" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 533.88 465 L 526.88 468.5 L 528.63 465 L 526.88 461.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="140" y="430" width="240" height="70" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 238px; height: 1px; padding-top: 465px; margin-left: 142px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">batchMigrateFollows(<br />        uint256[] calldata followerProfileIds,<br />        uint256[] calldata idsOfProfileFollowed,<br />        uint256[] calldata followTokenIds<br />    )</div></div></div></foreignObject><text x="142" y="469" fill="#333333" font-family="Helvetica" font-size="12px">batchMigrateFollows(...</text></switch></g><rect x="140" y="670" width="380" height="20" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 378px; height: 1px; padding-top: 680px; margin-left: 142px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">batchMigrateFollowModules(uint256[] calldata profileIds)</div></div></div></foreignObject><text x="142" y="684" fill="#333333" font-family="Helvetica" font-size="12px">batchMigrateFollowModules(uint256[] calldata profileIds)</text></switch></g><rect x="170" y="730" width="380" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 378px; height: 1px; padding-top: 745px; margin-left: 172px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Replaces the legacy FeeFollowModule with new FeeFollowModule, and initializes it with same parameters</div></div></div></foreignObject><text x="172" y="749" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">Replaces the legacy FeeFollowModule with new FeeFollowModule, a...</text></switch></g><rect x="170" y="770" width="410" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 408px; height: 1px; padding-top: 785px; margin-left: 172px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Clears the ProfileFollowModule if the Profile had it (because it's no longer used in V2, as the restriction to follow using a profile is enforced natively)</div></div></div></foreignObject><text x="172" y="789" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">Clears the ProfileFollowModule if the Profile had it (because it's n...</text></switch></g><rect x="140" y="690" width="380" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 378px; height: 1px; padding-top: 710px; margin-left: 142px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">for each profile in profileIds[]:</div></div></div></foreignObject><text x="142" y="714" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">for each profile in profileIds[]:</text></switch></g><path d="M 590.03 490 L 590.03 564.97 L 436.37 565" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 431.12 565 L 438.12 561.5 L 436.37 565 L 438.12 568.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 535 455 C 535 446.72 559.62 440 590 440 C 604.59 440 618.58 441.58 628.89 444.39 C 639.21 447.21 645 451.02 645 455 L 645 475 C 645 483.28 620.38 490 590 490 C 559.62 490 535 483.28 535 475 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 645 455 C 645 463.28 620.38 470 590 470 C 559.62 470 535 463.28 535 455" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 478px; margin-left: 536px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">FollowNFT</div></div></div></foreignObject><text x="590" y="481" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">FollowNFT</text></switch></g><rect x="650" y="420" width="240" height="90" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 238px; height: 1px; padding-top: 465px; margin-left: 652px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">tryMigrate(<br />        uint256 followerProfileId,<br />        address followerProfileOwner,<br />        uint256 idOfProfileFollowed,<br />        uint256 followTokenId<br />    )</div></div></div></foreignObject><text x="652" y="469" fill="#333333" font-family="Helvetica" font-size="12px">tryMigrate(...</text></switch></g><rect x="650" y="510" width="450" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 448px; height: 1px; padding-top: 525px; margin-left: 652px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">User who is migrated must hold the ProfileNFT and FollowNFT in the same account</div></div></div></foreignObject><text x="652" y="529" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">User who is migrated must hold the ProfileNFT and FollowNFT in the same acc...</text></switch></g><rect x="650" y="550" width="450" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 448px; height: 1px; padding-top: 565px; margin-left: 652px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">FollowNFT should not have `originalFollowTimestamp` set (introduced in V2 - this is how we distinguish between V1 non-migrated follows and V2 follows)</div></div></div></foreignObject><text x="652" y="569" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">FollowNFT should not have `originalFollowTimestamp` set (introduced in V2 -...</text></switch></g><rect x="650" y="590" width="450" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 448px; height: 1px; padding-top: 605px; margin-left: 652px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">We set the new V2 params and burn the FollowNFT (cause this is now the default state - following without followNFT as ERC721)</div></div></div></foreignObject><text x="652" y="609" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">We set the new V2 params and burn the FollowNFT (cause this is now the defa...</text></switch></g><rect x="150" y="540" width="280" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 278px; height: 1px; padding-top: 565px; margin-left: 152px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">LensHub emits a Follow(...) event if tryMigrate(...) succeeded and returned non-zero value for mintTimestamp</div></div></div></foreignObject><text x="152" y="569" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">LensHub emits a Follow(...) event if tryMigrat...</text></switch></g><rect x="150" y="160" width="380" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 378px; height: 1px; padding-top: 185px; margin-left: 152px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">We check if the profile has already been migrated by checking __DEPRECATED__handle != "" (V2 profiles do not have Handles, it's managed in a separate LensHandles &amp; TokenHandleRegistry contract)</div></div></div></foreignObject><text x="152" y="189" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">We check if the profile has already been migrated by checking _...</text></switch></g><rect x="150" y="340" width="170" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 168px; height: 1px; padding-top: 350px; margin-left: 152px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">emit ProfileMigrated(...) event</div></div></div></foreignObject><text x="152" y="354" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">emit ProfileMigrated(...) ev...</text></switch></g><path d="M 630 235 C 630 226.72 652.39 220 680 220 C 693.26 220 705.98 221.58 715.36 224.39 C 724.73 227.21 730 231.02 730 235 L 730 260 C 730 268.28 707.61 275 680 275 C 652.39 275 630 268.28 630 260 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 730 235 C 730 243.28 707.61 250 680 250 C 652.39 250 630 243.28 630 235" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 260px; margin-left: 631px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">LensHandles</div></div></div></foreignObject><text x="680" y="264" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">LensHandles</text></switch></g><path d="M 610 295 C 610 286.72 641.34 280 680 280 C 698.57 280 716.37 281.58 729.5 284.39 C 742.63 287.21 750 291.02 750 295 L 750 325 C 750 333.28 718.66 340 680 340 C 641.34 340 610 333.28 610 325 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 750 295 C 750 303.28 718.66 310 680 310 C 641.34 310 610 303.28 610 295" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 323px; margin-left: 611px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">TokenHandleRegistry</div></div></div></foreignObject><text x="680" y="326" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">TokenHandleRegistry</text></switch></g><path d="M 490 247.5 L 623.63 247.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 628.88 247.5 L 621.88 251 L 623.63 247.5 L 621.88 244 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="150" y="232.5" width="340" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 338px; height: 1px; padding-top: 248px; margin-left: 152px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">We mint a new Handle NFT with the same handle the V1 profile had using a special migrateHandle(...) function in LensHandles</div></div></div></foreignObject><text x="152" y="251" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">We mint a new Handle NFT with the same handle the V1 pro...</text></switch></g><path d="M 430 310 L 603.63 310" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 608.88 310 L 601.88 313.5 L 603.63 310 L 601.88 306.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="150" y="295" width="280" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 278px; height: 1px; padding-top: 310px; margin-left: 152px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">We register the Profile&lt;&gt;Handle link using a special migrationLink(...) function in TokenHandleRegistry</div></div></div></foreignObject><text x="152" y="314" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">We register the Profile&lt;&gt;Handle link using a s...</text></switch></g><rect x="510" y="220" width="100" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 98px; height: 1px; padding-top: 235px; margin-left: 512px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">migrateHandle(...)</div></div></div></foreignObject><text x="512" y="239" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">migrateHandle(.....</text></switch></g><rect x="470" y="280" width="100" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 98px; height: 1px; padding-top: 295px; margin-left: 472px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">migrationLink(...)</div></div></div></foreignObject><text x="472" y="299" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">migrationLink(.....</text></switch></g><rect x="550" y="390" width="80" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 78px; height: 1px; padding-top: 415px; margin-left: 552px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">FollowNFT for a given Profile</div></div></div></foreignObject><text x="552" y="419" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">FollowNFT for...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>